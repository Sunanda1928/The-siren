<!DOCTYPE html>
<html>
<head>
  <title>The Siren – Scam Detector</title>
  <meta charset="UTF-8">
</head>
<body>

  <h1>The Siren</h1>
  <p>Paste a message or call transcript to check if it is a scam.</p>

  <textarea id="message" rows="6" cols="60" placeholder="Paste message here..."></textarea>
  <br><br>

  <label>Select Language:</label>
  <select id="language">
    <option>English</option>
    <option>Hindi</option>
    <option>Telugu</option>
    <option>Tamil</option>
  </select>

  <br><br>

  <button onclick="analyze()">Analyze</button>

  <h3>Result:</h3>
  <div id="result">No analysis yet.</div>

  <script>
  function analyze() {
    var msg = document.getElementById("message").value.toLowerCase();
    var language = document.getElementById("language").value;
    var resultText = "";
    var voiceText = "";
    var langCode = "en-US";

    if (
      msg.includes("otp") ||
      msg.includes("click") ||
      msg.includes("link") ||
      msg.includes("urgent") ||
      msg.includes("blocked")
    ) {
      resultText =
        "⚠️ Likely Scam\n\n" +
        "Reason: This message shows common scam patterns.\n" +
        "Advice: Do NOT click links or share OTP.";

      if (language === "Hindi") {
        voiceText = "यह धोखाधड़ी संदेश है। कृपया लिंक या ओटीपी साझा न करें।";
        langCode = "hi-IN";
      } else if (language === "Telugu") {
        voiceText = "ఇది మోసపూరిత సందేశం. దయచేసి లింక్ లేదా ఓటీపీ ఇవ్వవద్దు.";
        langCode = "te-IN";
      } else if (language === "Tamil") {
        voiceText = "இது மோசடி செய்தி. தயவுசெய்து லிங்க் அல்லது ஓடிபி பகிர வேண்டாம்.";
        langCode = "ta-IN";
      } else {
        voiceText = "This is a scam message. Do not click links or share OTP.";
        langCode = "en-US";
      }
    } else {
      resultText =
        "✅ Looks Safe\n\n" +
        "Reason: No common scam signs detected.\n" +
        "Advice: Still verify the sender.";

      if (language === "Hindi") {
        voiceText = "कोई धोखाधड़ी नहीं पाई गई। कृपया प्रेषक की पुष्टि करें।";
        langCode = "hi-IN";
      } else if (language === "Telugu") {
        voiceText = "మోసం గుర్తించబడలేదు. పంపినవారిని నిర్ధారించండి.";
        langCode = "te-IN";
      } else if (language === "Tamil") {
        voiceText = "மோசடி கண்டறியப்படவில்லை. அனுப்பியவரை சரிபார்க்கவும்.";
        langCode = "ta-IN";
      } else {
        voiceText = "No scam detected. Please verify the sender.";
        langCode = "en-US";
      }
    }

    document.getElementById("result").innerText = resultText;

    // 🔊 FIXED VOICE LOGIC
    window.speechSynthesis.cancel(); // clear stuck audio

    var utterance = new SpeechSynthesisUtterance(voiceText);
    utterance.lang = langCode;
    utterance.rate = 0.8;   // slower & clearer
    utterance.pitch = 1.0;

    // Select correct voice explicitly
    var voices = window.speechSynthesis.getVoices();
    for (var i = 0; i < voices.length; i++) {
      if (voices[i].lang === langCode) {
        utterance.voice = voices[i];
        break;
      }
    }

    window.speechSynthesis.speak(utterance);
  }
</script>



</body>
</html>

